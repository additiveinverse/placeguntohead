@import './_variables';
@import './_mixins';
@import './_utilities';
@import './_grid';
@import './_sprite';
@import './lesshat';

/////////////////////////// Global style scaffolding
@font-face {
	.font-face(typicons, '/font/typicons');
}

.opacity-transition {
	.transition(opacity, .35s);
}

.animate {
	.transition( all, 0.5s );
}

.lnk {
	&:extend( .animate );
	cursor: pointer;
}

#navicon {
	@item-width: 35px;

	.closed {
		font-size: 0;
		cursor: pointer;
		background: linear-gradient(
			to bottom,
			@tan, @tan 20%,
			transparent 20%, transparent 40%,
			@tan 40%, @tan 60%,
			transparent 60%, transparent 80%,
			@tan 80%, @tan 100%
		);
		&:extend(.animate);
		.size(@item-width);
	}

	.open {
		// .size( @item-width, @item-width / 2 );
		background: linear-gradient(
			to bottom,
			transparent, transparent 40%,
			@tan 40%, @tan 60%,
			transparent 60%, transparent 100%,
		);
	}
}

blockquote {
	font-style: italic;
}

body {
	text-shadow: -1px -1px 0 fadeout(@grey-dark, 50%);
	color: @base-type-color;
	background: url(../img/bg.texture.png) repeat 0 0 fixed @grey-med;
}

/////////////////////////// Page layout
.page {
	&-nav {
		position: fixed;
		top: -3em;
		width: 100%;
		z-index: 200;

		&-button {
			text-transform: uppercase;
			color: @tan;
			cursor: pointer;
			display: block;
			position: relative;
			top: 4.5em;
			width: 115px;
			right: -73%;
			z-index: 230;

			&:after {
				display: inline-block;
				vertical-align: middle;
				position: relative;
				margin-left: 1rem;
				._inject;
				&:extend(.animate);
				&:extend(#navicon .closed);
			}

			&.active {
				&:after {
					&:extend(#navicon .open);
				}
			}
		}

		&-wrap {
			position: absolute;
			z-index: 220;
			top: -@base-margin * 75;
			background-color: fadeout(@black, 35%);
			text-align: center;
			padding-top: @base-margin * 5;
			width: 100%;
			opacity: 0;
			&:extend(.animate);

			&.active {
				opacity: 1;
				top: 0;
			}
		}

		&-lst {
			text-align: left;
		}

		&-hdr {
			&:extend(.lnk);
		}

		&-l1 {
			&-itm {
				width: calc(~"100% / 3 - 1.5em");
				.inline-def;
			}

			&-lst {
				margin-bottom: 0;
				padding-left: @base-margin;
			}
		}

		&-l2 {
			&-itm {}
			&-lst {
				padding-left: 0;
			}
		}
	}

	&-content {
		.bb(1px, dashed, @grey);
	}

	&-footer {
		.bt(1px, dashed, @grey);

		&-info {
			color: @grey;
			.font-size(@base-type-sm);
			margin-top: @base-margin-half;

			&-copy,
			&-poweredby {
				.column(6);
			}

			&-poweredby {
				text-align: right;
			}
		}
	}
}

.author {
	color: @grey-lighter;
	font-size: 0;

	&-photo {
		box-shadow: 1px 1px 1px fade(@white, 25% ), -1px -1px 1px @grey-dark;
		border-radius: 100%;
		.border( 8px, solid, @white-off );
		.size( 22.9167 * 10px - 20 );
		.sepia(50%);
	}

	&-network {
		&:extend(.inline-def);

		&-antisocial {
			&-lst {
				.font-size(@base-type-size);
				&:extend( .navlist );
			}

			&-itm {
				.icon( "app", @bookmark );

				&:hover {
					&:after {
						opacity: 1
					}
				}
			}
		}

		&-social {
			&-lst {
				border: none;
				padding-top: 0;
				&:extend( .navlist );
			}

			&-itm {
				display: inline-block;
				vertical-align: top;
				font-size: 0;
				border-radius: 100%;
				border: 5px solid darken( @border-color, 20%);
				margin: 8px 8px 8px 0;
				opacity: 0.5;
				background-size: 302%;
				background-color: @white-off;
				&:extend( .sprite, .opacity-transition );
				.size(48px);

				&-bandcamp {
					.svg-sprite-position( @ico-bandcamp );
				}

				&-flickr {
					.svg-sprite-position( @ico-flickr );
				}

				&-last-fm {
					.svg-sprite-position( @ico-lastfm-fill );
				}

				&-society6 {
					.svg-sprite-position( @ico-society6 );
				}

				&-splice {
					.svg-sprite-position( @ico-splice );
				}

				&-soundcloud 	{
					.svg-sprite-position( @ico-soundcloud-fill );
				}

				&-spotify {
					.svg-sprite-position( @ico-spotify-fill );
				}

				&-twitter {
					.svg-sprite-position( @ico-twitter-fill );
				}

				&:hover {
					opacity: 1;
				}
			}
			&-lnk {
				display: block;
				.size(40px);
			}
		}
	}
}

.nav {
	&-list {
		padding: @base-margin-half;
		background-color: fade(@black, 65%);
	}
}

.navlist {
	margin: auto;
	text-transform: uppercase;
}

.btn {
	color: @btn-secondary;
	padding: @base-margin-quarter @base-margin-eighth;
	&:extend( .animate );

	&-prev {
		.icon('pre', @chevron-right );
	}
	&-back {
		.icon( "pre", @chevron-left );
	}
}

.post-index {
	&-ttl {
		&-lnk {
			.push(1);
		}
	}

	&-img img {
		display: block;
	}

	&-lst {
		&-level2,
		&-level1 {
			padding-left: 0;
		}

		&-level1 {
			font-size: 0;
			.make-row;
		}

		&-level2 {
			.font-size(@base-type-size);
			// margin-bottom: unit( @base-margin * 3, % );
			margin-bottom: @base-margin * 2;
		}
	}

	&-itm {
		&-level1 {
			&:extend(.animate);
		}
		&-level2 {
		}
	}
}

.post {
	color: @tan;

	&-header {
		position: relative;

		&-meta {
			&-track {
				color: @blue;
			}

			&-release {
				color: @grey;
			}
		}
	}

	&-meta {
		.font-size( @base-type-h6 );
		font-weight: 700;
	}
}

// @import './media';
// 320px
@media only screen and ( min-width: 320px ) {
	.interior_row {
		.row( 12, 87% );
		padding: @base-margin-half 0;
	}

	.page {
		&-header {
			&:extend(.interior_row all);
			color: @grey;
			position: relative;
			background: url('/img/logo_flat_2016.svg') 0 40% no-repeat;
			z-index: 210;

			background-size: 14%;

			&-ttl {
				margin-bottom: 0;
				text-transform: capitalize;

				.font-size(@base-type-h4);
				padding-left: 1.85em;
				line-height: 1;

				&-lnk {
					color: @rust;
				}
			}

			&-desc {
				padding-left: @base-margin * 2;
				margin: 0;
				.uppercase;
			}
		}

		&-nav {
			&-button {}
		}

		&-author:extend(.interior_row all) {}
		&-content:extend(.interior_row all) {}
	}

	.navlist {
		padding: 0 0 @base-margin-half;
	}

	.author {
		&:extend(.interior_row all);
		&-photo {
			display: block;
			margin: unit(@base-margin * 3, %) auto;
		}

		&-network {
			&-antisocial-lst {
				padding-top: 0;
			}
		}

		&-bio {
			padding: @base-margin-half 0;
		}
	}

	.post {
		&-ttl {
			.font-size( @base-type-h3 );
			margin-bottom: @base-margin;
		}

		&-header {
			&-title {
				.font-size( @base-type-h2, 2 );
				margin-bottom: @base-margin-quarter;
			}
			&-meta {
				&-track {
					padding-right: @base-margin-eighth;
				}
			}
		}
	}
}

// 480px
@media only screen and ( min-width: 480px ) {
	.interior_row {
		.row(12, 95%);
	}

	.page {
		&-content:extend(.interior_row all) {};
		&-footer:extend(.interior_row all) {};
		&-header:extend(.interior_row all) {
			background-size: 10%;
		};
	}

	.post-index {
		&-itm {
			&-level1 {
				.column(6);
			}
		}
	}

	.post {
		&-header {
			&-title {
				// .font-size( @base-type-h4, 0.5 );
			}
		}
	}

	.navlist {
		padding: @base-margin 0 @base-margin-half;
	}

	.author {
		padding: @base-margin 0;
		&-network {
			.column(5);
		}

		&-photo {
			.inline-def;
			margin: unit(@base-margin * 3, %) unit(@base-margin * 2, %);
		}
	}
}

// 640px
@media only screen and ( min-width: 640px ) {
	.page {
		&-header {
			background-size: 7%;
		}
	}

	.post-index {
		&-itm {
			&-level1 {
				.column(4);
			}
		}
	}
}

// 768px
@media only screen and ( min-width: 768px ) {
	.page {
		&-header {

			&-ttl {
				.font-size(@base-type-h2);
				padding-left: @base-margin;
			}
		}

		&-nav {}

		&-content:extend(.interior_row all) {}
		&-aside:extend(.interior_row all) {}
	}

	.post {
		&-header {
			&-title {
				.font-size( @base-type-h1, 2 );
			}
		}

	.author {
		&-photo {
			margin: unit(@base-margin * 2, %) unit(@base-margin * 2, %);
		}
	}
}


// 980px
@media only screen and ( min-width: 992px ) {
	.interior_row {
		padding: @base-margin-half;
		.row(12, 55%);
	}

	.page {
		&-header:extend(.interior_row all) {
			.row(11, 49.5%);
			left: -3%;
			background-size: 5%;
		}

		&-nav-wrap {
		}

		&-nav-l1-lst:extend( .interior_row all ) {}
		&-content:extend(.interior_row all) {}
		&-author:extend(.interior_row all) {}
		&-footer:extend(.interior_row all) {}
	}

	.post {
		&-header {
			position: relative;
			&-title {
				.font-size(@base-type-h1, 1);

				&-link {
				}
			}

			&-meta {
				&-track {
					top: @base-margin * 1.5;
				}

				&-release {
					.rotates( 90deg, 12px 12px 0 );
					top: @base-margin * 3.2;
				}
			}
		}

		&-meta {
			position: absolute;
			.pull(@base-margin-half);
		}
	}

	.author {
		&-network {
			.column(3);
		}

		&-photo {
			.grid-margin( 12, unit(@base-margin * 2, %) );
				// margin: unit(@base-margin * 2, %) unit(@base-margin, %) 0 unit(@base-margin * 2, %);
		}

		&-bio {
			.column(6.5);
			padding: 0;
			margin-top: @base-margin;
			margin-bottom: @base-margin;
		}
	}
}

// 1024px
@media only screen and ( min-width: 1024px ) {
	.post-index {
		&-itm {
			&-level1 {
				.column(3);
			}
		}
	}
}


// 1280px
@media only screen and ( min-width: 1280px ) {
}
