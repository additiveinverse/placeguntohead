@import './_variables';
@import './_mixins';
@import './_grid';
@import './_typicons';
@import './lesshat';

/////////////////////////// Global style scaffolding
@font-face {
	.font-face(socicon, '/font/socicon-webfont');
}

@font-face {
	.font-face(typicons, '/font/typicons');
}

// .sprite {
// 	background-image: url(../img/sprite.png);
// }

.animate {
	.transition( all, 0.35s );
}

.lnk {
	&:extend( .animate );
	cursor: pointer;
}

.navicon {
	font-size: 0;
	margin: 20px;
	cursor: pointer;
	background: linear-gradient(
		to bottom, 
		@white, @white 20%, 
		transparent 20%, transparent 40%, 
		@white 40%, @white 60%, 
		transparent 60%, transparent 80%, 
		@white 80%, @white 100%
	);
	.size(40px);
	.page-nav:hover & {
		background: linear-gradient(
			to bottom, 
			@grey-med, @grey-med 20%, 
			transparent 20%, transparent 40%, 
			@grey-med 40%, @grey-med 60%, 
			transparent 60%, transparent 80%, 
			@grey-med 80%, @grey-med 100%
		);
	}
}

blockquote {
	font-family: @font-serif;
}

body {
	text-shadow: -1px -1px 0 fadeout(@grey-dark, 50%);
	color: @base-type-color;
	background: url(../img/bg.texture.png) repeat 0 0, 
							url(../img/rando_texture.png) no-repeat top center @grey-med;
	background-size: 500px, 100% 750px;
}

/////////////////////////// Page layout
.page {
	position: relative;

	&-header {
		color: @grey;
		padding: @base-margin-half @base-margin * 2;
		position: relative;

		&-ttl {
			margin-bottom: 0;
			text-transform: capitalize;
			.col(6);

			&-lnk {
				color: @rust;
				&:hover {
					color: darken(@rust, 15%);
				}
			}
		}

		&-desc { 
			margin: 0; 
			.uppercase;
		}
	}

	&-aside {
		position: absolute;
		right: 0;
		padding: @base-margin-half @base-margin * 2 @base-margin-half 0;
		color: @grey-lighter;
		.col(3.3);

		&-copy {
			margin-bottom: 0; 
		}

		&-poweredby {
			.font-size( @base-type-sm, 0.5 );
		}
	}

	&-nav {
		position: absolute;
		top: 0;
		right: 0;
		width: 100%;
		text-align: right;

		&:before {
			z-index: 90;
			&:extend(.navicon);
			._inject();
		}

		&:hover {
			.page-nav-lst {
				top: -@base-margin;
			}
		}

		&-lst {
			position: absolute;
			text-align: left;
			z-index: 40;
			top: -1000px;
			width: 100%;
			padding-top: @base-margin;
			background-color: fadeout(@black, 35%);
			&:extend(.animate);
		}

		&-hdr {
			&:extend(.lnk);
		}

		&-l1 {
			&-itm {
				width: calc(~"100% / 6");
				.inline-def;
			}

			&-lst {
				margin-bottom: 0;
				padding-left: 0;
			}
		}

		&-l2 {
			&-itm {}
			&-lst {
				// padding-left: @base-margin-half;
			}
		}
	}

	&-content {
		padding: 0 31% @base-margin-half @base-margin * 2;
	}
}

.author {
	margin-bottom: 1em;
	.bt(1px, dashed, fade( @grey, 10% ));
	.bb(1px, dashed, @white-out);

	&-photo {
		position: relative;
		top: 1em;
		box-shadow: 1px 1px 1px fade(@white, 25% ), -1px -1px 1px @grey-dark;
		.inline-def;
		.border-radius(50%);
		.border( 8px, solid, @white-off );
		.col(4);
	}

	&-network {
		margin-left: @base-margin-half;
		.inline-def;
		.col(7);

		&-antisocial {
			&-lst {
				border-bottom: none;
				&:extend( .navlist );
			}

			&-itm {
				.icon( "app", @link );

				&:hover {
					&:after {
						opacity: 1
					}
				}
			}
		}

		&-social {
			&-lst {
				border: none;
				padding: 0;
				margin-top: 0;
			}

			&-itm {
				display: inline-block;
				text-align: center;
				border-radius: 50px;
				box-shadow: 1px 1px 0 fade( @white, 25% ), 
										1px 1px 0 @grey-dark inset;
				overflow: hidden;
				margin-right: 5px;
				font-size: 0;
				.transition( box-shadow, .3s );

				&:hover {
					box-shadow: 1px 1px 0 @grey-dark, 
											1px 1px 0 fade( @white, 35% ) inset;
				}

				&:before {
					cursor: pointer;
					color: @white;
					padding: @base-margin-half / 3;
					font-family: socicon;
					&:extend( .ico_base );
					.font-size( 22 );
				}

				&-flickr:before {
					background-color: rgb(255, 0, 132);
					._inject('v');
				}
				
				&-twitter:before {
					background-color: rgb(85, 172, 238);
					._inject('a');
				}
				
				&-last-fm:before {
					background-color: rgb(208, 33, 39);
					._inject('q');
				}
				
				&-soundcloud:before {
					background-color: rgb(255, 80, 0);
					._inject('n');
				}
				
				&-society6:before { 
					background-color: @black;
					._inject('s');
				}

				&-github:before {
					background-color: @black;
					._inject('Q');
				}
			}
		}
	}
}

.nav {
	align-self: stretch;
	&-list {
		padding: @base-margin-half @base-margin;
		background-color: multiply(@grey, @grey);
	}	
}

.navlist {
	margin: auto;
	padding: @base-margin 0;
	text-transform: uppercase;
}

.btn {
	color: @blue;
	text-shadow: -1px -1px 0 @black, 1px 1px 0 @grey-dark;
	padding: @base-margin @base-margin-half;
	.gradient( 0deg, @black, 0%, @grey-dark, 100% );
	&:extend( .animate );
}

.post {
	color: @white;
	// text-shadow: 1px 1px 0 @grey-dark;
	padding-right: @base-margin-half;

	&-hdr {
		position: relative;

		&-ttl {
			font-weight: 300;

			&-lnk {
				.push(1);
			}
		}

		&-meta {
			font-weight: 800;
			display: inline-block;
			position: absolute;

			&-track {
				top: unit( @base-line-multiplier, px );
				color: @blue;
				text-align: center;
				.col(1);	
			}

			&-release {
				top: unit( @base-type-size, px );
				color: @grey;
				.rotates( 90deg, 0 50px 0 );
				.font-size( @base-type-sm, 0.5 );
			}
		}
	}

	&-main {
		.prefix(1);
	}

}

.post-index {
	&-ttl {
		font-weight: 300;
		margin: 0.4em 0;

		&-lnk {
			.push(1);
		}
	}

	&-img img {
		display: block;
		width: 100%;
		height: auto;
	}

	&-lst {
		&-level2,
		&-level1 {
			padding-left: 0;
			vertical-align: top;
		}

		&-level1 {
			.display(flex);
			flex-wrap: wrap;
			align-content: space-around;
		}

		&-level2 {
			.font-size(@base-type-size);
		}	
	}

	&-itm {
		&-level1 {
			padding: 0 @base-margin 0 0;
			flex: 1 1 auto;
			width: 30px;
			.transition;
		}
	}
}

@import './media';